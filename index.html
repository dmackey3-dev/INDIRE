<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Triple Stopwatch</title>
  <style>
    /* Reset defaults */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background: transparent;
      margin: 6px;
    }

    table {
      border-collapse: collapse;
    }

    td {
      border: 1px solid #000;
      padding: 4px 6px;
      text-align: center;
      vertical-align: middle;
    }

    .label {
      font-weight: bold;
      font-size: 12px;
      text-align: left;
    }

    .time {
      display: inline-block;
      width: 70px;
      font-size: 12px;
      font-weight: bold;
      text-align: center;
    }

    /* Theme-aware colors */
    @media (prefers-color-scheme: light) {
      .label, .time { color: black; }
    }
    @media (prefers-color-scheme: dark) {
      .label, .time { color: white; }
      body { background-color: #121212; }
      td { border-color: #666; }
    }

    button {
      all: unset;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 22px;
      height: 22px;
      font-size: 12px;
      margin-left: 3px;
      background: #fff;
      border: 1px solid #000;
      border-radius: 3px;
      cursor: pointer;
    }

    @media (prefers-color-scheme: dark) {
      button {
        background: #222;
        border: 1px solid #666;
        color: white;
      }
    }
  </style>
</head>
<body>
  <table>
    <tr>
      <td class="label">Ingestion</td>
      <td>
        <span class="time" id="time1">00:00:00</span>
        <button onclick="start(1)">▶</button>
        <button onclick="stop(1)">■</button>
        <button onclick="reset(1)">↺</button>
      </td>
    </tr>
    <tr>
      <td class="label">Digestion</td>
      <td>
        <span class="time" id="time2">00:00:00</span>
        <button onclick="start(2)">▶</button>
        <button onclick="stop(2)">■</button>
        <button onclick="reset(2)">↺</button>
      </td>
    </tr>
    <tr>
      <td class="label">Reflection</td>
      <td>
        <span class="time" id="time3">00:00:00</span>
        <button onclick="start(3)">▶</button>
        <button onclick="stop(3)">■</button>
        <button onclick="reset(3)">↺</button>
      </td>
    </tr>
  </table>

  <script>
    const timers = {
      1: { interval: null, elapsed: 0 },
      2: { interval: null, elapsed: 0 },
      3: { interval: null, elapsed: 0 }
    };

    function formatTime(totalSeconds) {
      const h = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
      const m = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
      const s = String(totalSeconds % 60).padStart(2, '0');
      return `${h}:${m}:${s}`;
    }

    function updateDisplay(id) {
      document.getElementById(`time${id}`).textContent = formatTime(timers[id].elapsed);
    }

    function start(id) {
      if (timers[id].interval) return;
      timers[id].interval = setInterval(() => {
        timers[id].elapsed++;
        updateDisplay(id);
      }, 1000);
    }

    function stop(id) {
      clearInterval(timers[id].interval);
      timers[id].interval = null;
    }

    function reset(id) {
      stop(id);
      timers[id].elapsed = 0;
      updateDisplay(id);
    }
  </script>
</body>
</html>
